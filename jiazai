import time
import threading
import keyboard
import sys

# ============================================
# é…ç½®åŒºåŸŸ
# ============================================

# åæ ‡ç‚¹åˆ—è¡¨
COORDINATES = [
    (286.41, 272.00, -34.86),
    (285.20, 272.00, -8.64),
    (283.41, 272.00, 19.00),
    (318.63, 272.00, 16.27),
    (319.22, 272.00, -5.45),
    (319.71, 272.00, -30.05),
    (371.45, 272.00, -30.92),
    (370.53, 272.00, -2.17),
    (369.70, 272.00, 20.27)
]

TELEPORT_DELAY = 0.01  # 0.01ç§’é—´éš”
HOTKEY = 'F8'          # å¯åŠ¨/åœæ­¢çƒ­é”®

# ============================================
# æ ¸å¿ƒåŠŸèƒ½
# ============================================

is_running = False
current_index = 0
lock = threading.Lock()

def perform_teleport(x, y, z):
    """
    æ‰§è¡Œä¼ é€æ“ä½œ - éœ€è¦æ ¹æ®ä½ çš„æ¸¸æˆä¿®æ”¹æ­¤å‡½æ•°
    ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿè¾“å…¥ä¼ é€å‘½ä»¤
    """
    # TODO: åœ¨è¿™é‡Œå®ç°å®é™…çš„ä¼ é€é€»è¾‘
    # ä¾‹å¦‚ï¼š
    # keyboard.press('t')  # æŒ‰ä¸‹ä¼ é€é”®
    # time.sleep(0.05)
    # keyboard.write(f'/tp {x} {y} {z}')
    # time.sleep(0.05)
    # keyboard.press('enter')
    
    # ä¸´æ—¶ï¼šä»…æ‰“å°åæ ‡ï¼ˆå®é™…ä½¿ç”¨æ—¶éœ€æ›¿æ¢ä¸ºçœŸå®ä¼ é€ä»£ç ï¼‰
    print(f"[ä¼ é€] X: {x}, Y: {y}, Z: {z}")

def teleport_loop():
    """ä¸»ä¼ é€å¾ªç¯"""
    global is_running, current_index
    
    print("\n" + "="*50)
    print("ğŸš€ é«˜é€Ÿä¼ é€å¾ªç¯å·²å¯åŠ¨")
    print("="*50)
    
    while is_running:
        # è·å–å½“å‰åæ ‡å¹¶æ›´æ–°ç´¢å¼•
        with lock:
            coord = COORDINATES[current_index]
            current_index = (current_index + 1) % len(COORDINATES)
        
        # æ‰§è¡Œä¼ é€
        perform_teleport(*coord)
        
        # ç²¾ç¡®ç­‰å¾…
        time.sleep(TELEPORT_DELAY)
    
    print("\nğŸ›‘ ä¼ é€å¾ªç¯å·²åœæ­¢")

def toggle_teleport():
    """åˆ‡æ¢ä¼ é€çŠ¶æ€"""
    global is_running
    
    if is_running:
        is_running = False
    else:
        is_running = True
        thread = threading.Thread(target=teleport_loop)
        thread.daemon = True
        thread.start()

# ============================================
# ä¸»ç¨‹åº
# ============================================

def main():
    print("="*60)
    print("ğŸš€ é«˜é€Ÿåæ ‡å¾ªç¯ä¼ é€ç³»ç»Ÿ (PCç‰ˆ)")
    print("="*60)
    print(f"ğŸ“ åæ ‡ç‚¹æ•°é‡: {len(COORDINATES)}")
    print(f"â±ï¸  ä¼ é€é—´éš”: {TELEPORT_DELAY}ç§’")
    print(f"âŒ¨ï¸  å¼€å…³çƒ­é”®: {HOTKEY}")
    print("="*60)
    print("âš ï¸  é‡è¦ï¼šéœ€è¦ä¿®æ”¹ perform_teleport() å‡½æ•°ä»¥å®ç°å®é™…ä¼ é€")
    print("="*60)
    print("ç­‰å¾…çƒ­é”®æŒ‰ä¸‹...")
    
    # æ³¨å†Œçƒ­é”®
    keyboard.add_hotkey(HOTKEY, toggle_teleport)
    
    # ç­‰å¾…é€€å‡º
    try:
        keyboard.wait('F12')  # æŒ‰F12é€€å‡ºç¨‹åº
    except KeyboardInterrupt:
        print("\nç¨‹åºå·²é€€å‡º")

if __name__ == "__main__":
    main()