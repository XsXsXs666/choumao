local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "æŒ‚æœºä¼ é€ç³»ç»Ÿ",
    Size = UDim2.fromOffset(400, 350),
    Theme = "Dark",
    Transparent = true,
})

local Tabs = {
    Teleport = Window:Tab({ Title = "ä¼ é€æ§åˆ¶", Icon = "navigation" }),
    Settings = Window:Tab({ Title = "è®¾ç½®", Icon = "settings" })
}

-- ä¼ é€é…ç½®
local TARGET_POSITION = Vector3.new(887.99, -1470.40, 754.94)
local teleportEnabled = false
local teleportSpeed = 0  -- æ”¹ä¸º0å®ç°é”å®šä¼ é€
local teleportConnection = nil
local autoRestart = true

-- çŠ¶æ€å˜é‡
local status = "å°±ç»ª"
local errorCount = 0

-- é”å®šä¼ é€å‡½æ•°ï¼ˆæ— å»¶è¿Ÿï¼‰
local function LockTeleport()
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local hrp = character.HumanoidRootPart
        local targetCFrame = CFrame.new(
            TARGET_POSITION.X,
            TARGET_POSITION.Y + 2,
            TARGET_POSITION.Z
        )
        hrp.CFrame = targetCFrame
        return true
    end
    return false
end

-- å¼€å§‹é”å®šä¼ é€
local function StartLockTeleport()
    if teleportEnabled then return end
    
    teleportEnabled = true
    status = "é”å®šä¼ é€ä¸­..."
    
    -- ä½¿ç”¨RenderSteppedæ›¿ä»£Heartbeatå®ç°é›¶å»¶è¿Ÿä¼ é€
    teleportConnection = game:GetService("RunService").RenderStepped:Connect(function()
        if not teleportEnabled then return end
        
        local success, err = pcall(LockTeleport)
        if not success then
            errorCount = errorCount + 1
            if errorCount > 10 then
                StopTeleporting()
                if autoRestart then
                    task.wait(1)
                    StartLockTeleport()
                end
                return
            end
        else
            errorCount = math.max(0, errorCount - 0.5)
        end
    end)
    
    -- æ›´æ–°UIæ˜¾ç¤º
    if Tabs.Teleport._content and Tabs.Teleport._content.StatusText then
        Tabs.Teleport._content.StatusText:SetText("çŠ¶æ€: " .. status)
    end
end

-- åœæ­¢ä¼ é€
local function StopTeleporting()
    teleportEnabled = false
    if teleportConnection then
        teleportConnection:Disconnect()
        teleportConnection = nil
    end
    status = "å·²åœæ­¢"
    
    if Tabs.Teleport._content and Tabs.Teleport._content.StatusText then
        Tabs.Teleport._content.StatusText:SetText("çŠ¶æ€: " .. status)
    end
end

-- è§’è‰²é‡ç”Ÿåè‡ªåŠ¨æ¢å¤
game.Players.LocalPlayer.CharacterAdded:Connect(function()
    if teleportEnabled then
        task.wait(1)
        if teleportEnabled then
            StartLockTeleport()
        end
    end
end)

-- ä¼ é€æ§åˆ¶Tab
Tabs.Teleport:Button({
    Title = "ğŸ”’ å¼€å§‹é”å®šä¼ é€", 
    Callback = function()
        StartLockTeleport()
        WindUI:Notify({
            Title = "é”å®šä¼ é€å¼€å§‹",
            Content = "å·²å¼€å§‹é›¶å»¶è¿Ÿé”å®šä¼ é€",
            Duration = 2
        })
    end
})

Tabs.Teleport:Button({
    Title = "â¹ åœæ­¢ä¼ é€", 
    Callback = function()
        StopTeleporting()
        WindUI:Notify({
            Title = "ä¼ é€åœæ­¢",
            Content = "å·²åœæ­¢ä¼ é€",
            Duration = 2
        })
    end
})

Tabs.Teleport:Toggle({
    Title = "è‡ªåŠ¨æ¢å¤", 
    Default = true,
    Callback = function(state)
        autoRestart = state
        WindUI:Notify({
            Title = "è®¾ç½®æ›´æ–°",
            Content = "è‡ªåŠ¨æ¢å¤: " .. (state and "å¼€å¯" or "å…³é—­"),
            Duration = 2
        })
    end
})

-- çŠ¶æ€æ˜¾ç¤ºï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰
local statusFrame = Instance.new("Frame")
statusFrame.BackgroundTransparency = 1
statusFrame.Size = UDim2.new(1, 0, 0, 30)

local statusLabel = Instance.new("TextLabel")
statusLabel.Text = "çŠ¶æ€: " .. status
statusLabel.Size = UDim2.new(1, 0, 1, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
statusLabel.Font = Enum.Font.SourceSans
statusLabel.TextSize = 14
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = statusFrame

-- ä¿å­˜å¼•ç”¨ä»¥ä¾¿æ›´æ–°
Tabs.Teleport._content = Tabs.Teleport._content or {}
Tabs.Teleport._content.StatusText = statusLabel

-- å°†çŠ¶æ€æ˜¾ç¤ºæ·»åŠ åˆ°UIä¸­
local teleportContent = Tabs.Teleport:GetContent()
if teleportContent then
    statusFrame.Parent = teleportContent
end

Tabs.Teleport:Label({
    Title = "ç›®æ ‡åæ ‡",
    Content = tostring(TARGET_POSITION)
})

Tabs.Teleport:Label({
    Title = "ä¼ é€æ¨¡å¼",
    Content = "é›¶å»¶è¿Ÿé”å®šæ¨¡å¼"
})

-- è®¾ç½®Tab
Tabs.Settings:Label({
    Title = "æ³¨æ„",
    Content = "å½“å‰ä¸ºé”å®šä¼ é€æ¨¡å¼ï¼Œä¼ é€é—´éš”ä¸º0"
})

Tabs.Settings:Input({
    Title = "Xåæ ‡", 
    Default = "887.99",
    Callback = function(text)
        local num = tonumber(text)
        if num then
            TARGET_POSITION = Vector3.new(num, TARGET_POSITION.Y, TARGET_POSITION.Z)
            WindUI:Notify({
                Title = "åæ ‡æ›´æ–°",
                Content = "Xåæ ‡å·²æ›´æ–°",
                Duration = 2
            })
        end
    end
})

Tabs.Settings:Input({
    Title = "Yåæ ‡", 
    Default = "-1470.40",
    Callback = function(text)
        local num = tonumber(text)
        if num then
            TARGET_POSITION = Vector3.new(TARGET_POSITION.X, num, TARGET_POSITION.Z)
            WindUI:Notify({
                Title = "åæ ‡æ›´æ–°",
                Content = "Yåæ ‡å·²æ›´æ–°",
                Duration = 2
            })
        end
    end
})

Tabs.Settings:Input({
    Title = "Zåæ ‡", 
    Default = "754.94",
    Callback = function(text)
        local num = tonumber(text)
        if num then
            TARGET_POSITION = Vector3.new(TARGET_POSITION.X, TARGET_POSITION.Y, num)
            WindUI:Notify({
                Title = "åæ ‡æ›´æ–°",
                Content = "Zåæ ‡å·²æ›´æ–°",
                Duration = 2
            })
        end
    end
})

Tabs.Settings:Button({
    Title = "ä¸€é”®ä¿å­˜åæ ‡", 
    Callback = function()
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local pos = character.HumanoidRootPart.Position
            TARGET_POSITION = pos
            WindUI:Notify({
                Title = "åæ ‡å·²ä¿å­˜",
                Content = string.format("æ–°åæ ‡: %.2f, %.2f, %.2f", pos.X, pos.Y, pos.Z),
                Duration = 3
            })
        end
    end
})

Tabs.Settings:Button({
    Title = "æ¸…ç©ºé”™è¯¯è®¡æ•°", 
    Callback = function()
        errorCount = 0
        WindUI:Notify({
            Title = "ç³»ç»Ÿç»´æŠ¤",
            Content = "é”™è¯¯è®¡æ•°å·²é‡ç½®",
            Duration = 2
        })
    end
})

-- é»˜è®¤é€‰æ‹©ä¼ é€æ§åˆ¶Tab
Window:SelectTab(1)

-- å¯åŠ¨é€šçŸ¥
WindUI:Notify({
    Title = "æŒ‚æœºä¼ é€ç³»ç»Ÿ",
    Content = "å·²åŠ è½½å®Œæˆ\né”å®šä¼ é€æ¨¡å¼å·²å¯ç”¨",
    Duration = 5
})

-- æ§åˆ¶å°è¾“å‡º
print("=== WindUIæŒ‚æœºä¼ é€ç³»ç»Ÿ ===")
print("ç›®æ ‡åæ ‡: " .. tostring(TARGET_POSITION))
print("ä¼ é€æ¨¡å¼: é›¶å»¶è¿Ÿé”å®šä¼ é€")
print("è‡ªåŠ¨æ¢å¤: " .. tostring(autoRestart))
print("æ­»äº¡åè‡ªåŠ¨æ¢å¤: å·²å¯ç”¨")